<!--pages/productDetail/productDetail.wxml-->
<import src="/zanui/stepper/index.wxml" />
<view class="container">
  <!--详情banner  -->
  <swiper style='height:1000rpx' indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}">
    <block wx:for="{{productDetailData.imgArray}}" wx:for-index="idx" wx:key="{{idx}}">
      <swiper-item>
        <image src="http://{{item}}" class="slide-image" style='width:100%;height:100%' />
      </swiper-item>
    </block>
  </swiper>
  <view style="display:flex;flex-direction:column;padding:30rpx;margin-bottom:30rpx;background-color:#ffffff">
    <text class='weui-article__h3'>{{productDetailData.productName}}</text>
    <text class='product-price'>¥ {{productDetailData.price}}</text>
  </view>
  <view class="weui-article__section" style='padding:30rpx;background-color:#ffffff'>
    <view class="weui-article__h2">商品详情</view>
    <view class="weui-article__p" style='font-size:28rpx;padding:10rpx;color:#424242'>
      {{productDetailData.description}}
    </view>
  </view>
  <view class="zan-panel">
    <view class="zan-btns">
      <button class="zan-btn zan-btn--danger" style='background-color:#212121' bindtap="toggleBottomPopup">
        下单
      </button>
      <button class="zan-btn zan-btn--danger" style='background-color:#212121' open-type="share">
      {{isShare?'帮他转发':"转发"}} </button>
    </view>
  </view>

  <!--下单浮层  -->
  <view class="popup-example--bottom zan-popup zan-popup--bottom {{ showBottomPopup ? 'zan-popup--show' : ''}}">
    <view class="zan-popup__mask" catchtap="toggleBottomPopup"></view>
    <view class="zan-popup__container">
      <view class="zan-btns">
        <view style='display:flex;flex-direction:row;justify-content:flex-start'>
          <view>
            <image style='width:260rpx;height:346rpx' src="http://{{productDetailData.imgArray[0]}}"></image>
          </view>
          <view style='display:flex;flex-direction:column;justify-content:center;align-items:center;flex:1'>
            <view>
              {{productDetailData.productName}}
            </view>
            <view class="product-price">
              ¥ {{productDetailData.price}}
            </view>
          </view>
        </view>

        <!--选择特征  -->
        <view wx:for="{{featureArray}}" wx:for-index="i" wx:key="{{idx}}">
          <view style='color:#424242,font-size:32rpx'>{{item.type}}</view>
          <view class="zan-cell zan-cell--last-child">
            <view wx:for="{{item.value}}" wx:key="{{idx}}" wx:for-item="itemChild" bindtap="selectFeature" data-type="{{item.type}}" data-selectValue='{{itemChild}}' class="zan-tag {{itemChild===selectColor||itemChild===selectSize?'feature-btn':'feature-btn-selected'}}">
              {{itemChild}}
            </view>
          </view>
        </view>

        <!--选择购买数量  -->
        <view style='display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-bottom:30rpx'>
          <view style='color:#424242,font-size:32rpx'>数量</view>
          <template is="zan-stepper" data="{{ ...stepper1, componentId: 'stepper1' }}" />
        </view>

        <!--添加收货地址  -->
        <view style='padding-bottom:30rpx'>
          <view style='display:flex;flex-direction:row;align-items:center;' hover-class="weui-cell_active" bindtap="address">
            <image src="../../images/product/Plus@3x.png" style="width: 32rpx;height: 32rpx;margin-right: 5px" />
            <view style='color:#545454;font-size:32rpx'>
              收货地址
            </view>
          </view>
          <view wx:if="{{address!=null}}" style='padding-bottom:30rpx;color:#656565;font-size:30rpx;padding-top:10rpx'>
            {{address.provinceName}} {{address.cityName}} {{address.countyName}} {{address.detailInfo}}
          </view>
        </view>

        <!--下单按钮  -->
        <button class="zan-btn zan-btn--primary" style='background-color:#000000' bindtap="placeOrder">确认下单</button>
      </view>
    </view>
  </view>
</view>